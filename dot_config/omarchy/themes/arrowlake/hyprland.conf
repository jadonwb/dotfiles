$activeBorderColor = rgb(3F3BF5) # #3F3BF5

general {
    col.active_border = $activeBorderColor
    col.inactive_border = rgb(0a0a1e) # #0a0a1e
    border_size = 2
    gaps_in = 2
    gaps_out = 4
}

animations {
    enabled = yes

    bezier = calm, 0.25, 0.9, 0.35, 1
    bezier = settle, 0.3, 1.1, 0.80, 1.02

    animation = windows,     1, 4, calm
    animation = windowsIn,   1, 4, calm
    animation = windowsOut,  1, 1, calm
    animation = windowsMove, 1, 4, calm

    animation = fade,        1, 3.5, calm
    animation = fadeIn,      1, 3.5, calm
    animation = fadeOut,     1, 2.5, calm

    animation = layers,      1, 3.5, calm
    animation = layersIn,    1, 3.5, calm
    animation = layersOut,   1, 2.5, calm

    animation = workspacesIn,  1, 4.5, settle, slide top
    animation = workspacesOut,  1, 4.5, settle, slide top
    animation = specialWorkspaceIn,  1, 4.5, settle, slide bottom
    animation = specialWorkspaceOut,  1, 4, settle, slide top
}

decoration {
    rounding = 14
    shadow {
        enabled = true
        range = 15
        render_power = 5
        color = rgba(0a0a1eee) #0a0a1e ee
        offset = 0 0
    }

    blur {
        enabled = true
        size = 2
        passes = 3
        contrast = 1.1
        brightness = 1.1
        vibrancy = 0.2
        vibrancy_darkness = 0.2
        noise = 0.03
        ignore_opacity = true
        new_optimizations = on
    }

    active_opacity = 0.95
    inactive_opacity = 0.91
    fullscreen_opacity = 1.0 
}

# ────────────────────────────────────────────────────────────
# Ghostty Size & Position Fix (Corrected Syntax)
# ────────────────────────────────────────────────────────────
# Fixes "Invalid parameters" error bar by using windowrulev2
windowrule {
  name = windowrule-1
  min_size = 960 640
  center = on
  match:class = ^(com.mitchellh.ghostty)$
}

# ────────────────────────────────────────────────────────────
# Blur & Layer Rules
# ────────────────────────────────────────────────────────────
layerrule {
  name = layerrule-1
  blur = on
  ignore_alpha = 0
  match:namespace = walker
}

layerrule {
  name = layerrule-2
  blur = on
  ignore_alpha = 0.1
  match:namespace = waybar
}

layerrule {
  name = layerrule-3
  blur = on
  ignore_alpha = 0
  match:namespace = notifications
}

layerrule {
  name = layerrule-5
  blur = on
  match:namespace = swayosd
}

# ────────────────────────────────────────────────────────────
# Omarchy Screensaver Rules - Disable Animation & Rounding
# ────────────────────────────────────────────────────────────
windowrule {
  name = screensaver-no-anim
  match:class = ^(org\.omarchy\.screensaver)$
  no_anim = on
}

windowrule {
  name = screensaver-no-rounding
  match:class = ^(org\.omarchy\.screensaver)$
  rounding = 0
}
